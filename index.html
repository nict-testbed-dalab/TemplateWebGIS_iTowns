<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html lang="ja">
    <head>
        <title>iTowns</title>
        <style type="text/css">
            html {
              height: 100%;
            }
            body {
              margin: 0;
              overflow:hidden;
              height:100%;
            }
            #viewerDiv {
                margin : auto auto;
                width: 100%;
                height: 100%;
                padding: 0;
            }
            .dg .c {
                width:40% !important;
            }
            .dg .property-name{ 
                width:60% !important;
            }
        </style>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./jquery-k2go-timeline/css/style.css">
        <link rel="stylesheet" href="./jquery-k2go-timeline/css/jquery-k2go-timeline.css">
        <link rel="stylesheet" href="./jquery-k2go-timeline/css/play_box.css">
        <script type="text/javascript" src="./jquery-k2go-timeline/jquery-3.6.0.js"></script>
        <script type="text/javascript" src="./jquery-k2go-timeline/jquery-k2go-timeline.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.6/dat.gui.min.js"></script>

        <!-- 初期レイヤリストファイル -->
        <script type="text/javascript" src="./JSONLayers/initialLayerList.js"></script>

        <!-- JQuery UI -->
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>

        <!-- カレンダー UI -->
        <script type="text/javascript" src="./jquery-k2go-timeline/lib/picker.js"></script>
        <script type="text/javascript" src="./jquery-k2go-timeline/lib/picker.date.js"></script>
        <script type="text/javascript" src="./jquery-k2go-timeline/lib/picker.date.lang.js"></script>
        <link rel="stylesheet" href="./jquery-k2go-timeline/css/default.css">
        <link rel="stylesheet" href="./jquery-k2go-timeline/css/default.date.css">
        <link rel="stylesheet" href="./jquery-k2go-timeline/css/conf_panel.css">

        <!-- Font Awesome -->
        <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">

        <!-- projectNict -->
        <script type="text/javascript" src="./projectNict/jquery-nict-stars-view-url.js"></script>
        <script type="text/javascript" src="./projectNict/DisplayCapture.js"></script>
        <script type="text/javascript" src="./projectNict/FileSaver.js"></script>
        <script type="text/javascript" src="./projectNict/colormap.js"></script>
        <script type="text/javascript" src="./projectNict/encoding.min.js"></script>
        <script type="text/javascript" src="./projectNict/papaparse.min.js"></script>

        <!-- TODO: ログイン機能の追加 -->
        <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>


    </head>
    <body>
        <div id="viewerDiv"></div>

        <!-- ボタン群1 -->
        <div class="move_button">
            <div id="movelink" style="display: grid; text-align: right; z-index: 3; width: min-content; border-style: groove; padding: 0 0 10px 10px; background-color: rgba(200,200,200,0.2); margin-bottom: 20px;">
                <!-- 開閉ボタンの追加 -->
                <p id="open_movelink">ボタン <i class="fa fa-minus fa-lg"></i></p>

                <!-- TODO: ログイン機能の追加 -->
                <nav class="navbar navbar-expand-md navbar-light bg-light">
                    <div class="container">
                        <div class="navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav d-none d-md-block">
                                <!-- Login button: show if NOT authenticated -->
                                <li class="nav-item auth-invisible">
                                    <button id="qsLoginBtn" class="btn btn-primary btn-margin auth-invisible">ログイン</button>
                                </li>
                                <!-- / Login button -->

                                <!-- Fullsize dropdown: show if authenticated -->
                                <li class="nav-item dropdown auth-visible hidden">
                                    <a href="#" class="dropdown-item" id="qsLogoutBtn">
                                        <!-- Profile image should be set to the profile picture from the id token -->
                                        <img alt="Profile picture" class="nav-user-profile profile-image rounded-circle" width="35" style ="margin-top: 0px;"/>
                                    </a>
                                    <input type="hidden" id="atk" value="" >
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>

                <div id="movelink_div" style=" z-index: 3;">
                    <div class="movelink_middle">
                        <p style="color:white">機能：</p>
                        <table>
                            <tr>
                                <td>
                                    <input type="button" id="button_single_capture" class=" btn_on_cursor" value="画面キャプチャ" >
                                    <input type="button" id="button_multi_capture" class=" btn_on_cursor" value="連続画面キャプチャ" ><br>
                                    <input type="button" id="get_nisin" class="get_data btn_on_cursor" value="データ取得(日進市)" >
                                    <input type="button" id="get_amedas" class="get_data btn_on_cursor" value="データ取得(アメダス)" >
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ボタン群2 -->
            <div id="camera_param" style="width: 200px; height: 410px; text-align: right; z-index:3; background-color:rgba(200,200,200,0.2); color: white;">
                <p id="open_camera">カメラの設定 <i class="fa fa-minus fa-lg"></i></p>
                <div id="camera_div" style="width: 200px;">
                    <ul>
                        <li><input type="button" value="Reset camera" class="param_set_camera" style="display:none;"/></li>
                        <li><label id="param_label">camera zoom : </label><input type="text" value="30" class="param_camera_vfov"/></li>
                        <li><div id="camera_vfov_slider"></div></li>
                        <li><label id="param_label">camera tilt : </label><input type="text" value="-25" class="param_camera_tilt"/></li>
                        <li><div id="camera_tilt_slider"></div></li>
                        <li><input type="checkbox" name="camera_tilt_mouse_dir" value="1" class="param_camera_tilt_mouse_dir" checked>mouse direction</input></li>
                        <li><label id="param_label">camera pan : </label><input type="text" value="0" class="param_camera_pan"/></li>
                        <li><div id="camera_pan_slider"></div></li>
                        <li><button class="btn_view_url">ViewURL</button></li>
                        <li><label id="param_lat">latitude : </label><input type="text" value="35.66" class="param_camera_lat input_text" style="width: 80px;"></li>
                        <li><label id="param_lon">longitude : </label><input type="text" value="138.06" class="param_camera_lon input_text" style="width: 80px;"></li>
                        <li><label id="param_alt">altitude : </label><input type="text" value="5000000" class="param_camera_alt input_text" style="width: 80px;"></li>
                        <li><button class="btn_set_position">Set Position</button></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 再生ボタン等の表示 -->
        <div id="current_time2" style="z-index: 3;">
            <div id="info"></div>
            <input type="date" style="display:none;"/>
            <input type="time" step="1" style="display:none;"/>
            <span id="date_box">
                <span id="cal" class="picker__input" aria-haspopup="true" aria-expanded="false" aria-readonly="false" aria-owns="cal_root"></span>
                <span id="date">0000-00-00 00:00:00</span>
                <span id="current_time" class="timeCurrent"></span>
            </span>
            <span id="play_box">
                <a id="button_loop"></a>
                <span id="play_ctl">
                    <a id="button_back_edge"></a>
                    <a id="button_back"></a>
                    <a id="button_play_reverse"><span></span></a>
                    <a id="button_stop"></a>
                    <a id="button_play"><span></span></a>
                    <a id="button_fwd"></a>
                    <a id="button_fwd_edge"></a>
                </span>
                <span><a id="button_conf"></a></span>
            </span>
        </div>

        <div id="panel-conf" class="ui-draggable ui-draggable-handle">
            <div id="panel-conf-header">
                <span>再生設定</span>
                <span id="panel-conf-close"></span>
            </div>
            <div id="play-range-col">
                <div id="form-title-play-speed">
                    <div id="form-title-play-speed-title">コマ送り速度</div>
                    <div class="input-area" id="play-speed-wrapper">
                        <input type="range" id="play-speed" min="1" step="1" max="11" value="4">
                    </div>
                    <div class="value-display" id="display1"></div>
                </div>
            </div>
            <div id="form-title-play-span">
                <div id="form-title-play-span-title">コマ送り間隔</div>
                <div class="input-area">
                    <input type="range" id="play-span" min="1" step="1" max="10" value="1">
                </div>
                <div class="value-display" id="display2"></div>
            </div>
        </div>
        
        <!-- タイムラインバーの表示 -->
        <div id="footer">
            <div id="button_range">
                <span>RangeBar</span>
            </div>
            <div id="timeline" style="z-index: 3;"></div>
            <div id="slider_label">1 day</div>
            <div id="slider">
                <a id="button_minus"></a>
                <input id="zoom-range" type="range" class="input-range" min="0" max="18" step="1" />
                <a id="button_plus"></a>
            </div>
        </div>

        <!-- ViewURLの表示 -->
        <div id="view_url" style="display:none;">
            <div id="view_url_box">
              <div class="view_url_box_header">
                <div class="view_url_box_title">ViewURL</div>
                <div class="view_url_box_close"></div>
              </div>
              <div class="view_url_box_body">
                <div class="input_group">
                  <input type="text" value="" aria-label="" readonly="" id="view_url_input">
                  <div class="input_group_button"></div>
                </div>
              </div>
            </div>
          </div>

        <!-- 凡例の表示 -->
        <div id="legend" class="drag-and-drop"></div>
        <div id="pop_legend" class="drag-and-drop" style="display:none;"></div>
        <div id="jinryu_legend" class="drag-and-drop" style="display:none;"></div>

        <!-- 前処理（アメダスなど）のデータ取得 -->
        <div id="prepro_controller" class="hidden">
            <input type="hidden" id="prepro_db_data_type" value="">
            <!-- <div>
              <span>表示形式　</span>
                <select id="view_type" >
                  <option value="bar" >棒グラフ</option>
                  <option value="single">単一点</option>
                  <option value="trajectory">軌跡</option>
                </select>
            </div> -->
            <div>
                <span>取得項目　</span>
                <select id="col_name">
                    <!-- <option value="precipitation24h">24時間降雨量</option> -->
                    <!-- <option value="speed">速度</option>
                    <option value="pm25">PM2.5</option> -->
                </select>
            </div>
            <div>
                <span>期間(開始)</span>
                <input type="datetime-local" id="start_date" class="cl_date">
                <!-- value="2023-03-06T08:30"  -->
              
            </div>
            <div>
                <span>期間(終了)</span>
                <input type="datetime-local" id="end_date" class="cl_date">
            </div>
            <div>
                <span>リサンプル</span>
                <select id="proc_type">
                    <option value="avg" selected="">平均値</option>
                    <option value="max">最大値</option>
                    <option value="min">最小値</option>
                    <option value="spline">スプライン補間</option>
                    <option value="linear">線形補間</option>
                </select>
            </div>
            <div>
                <span>時間粒度　</span>
                <input id="granularity_val" type="number" min="1" max="59" step="1" value="1">
                <select id="granularity">
                    <option value="minute">分</option>
                    <option value="hour" selected="">時間</option>
                    <option value="day">日</option>
                    <option value="month">月</option>
                    <option value="year">年</option>
                </select>
        
            </div>
            <div id="prepro_uploadArea" class="prepro_uploadArea">
                <div id="prepro_upload">
                    <label for="prepro_fileinput"><span id="prepro_file_name">ファイルをドラッグ＆ドロップしてください</span>
                    </label>
                </div>
            </div>
        
            <div class="prepro_size">
                <span>大きさ(標準比)</span>
                <input type="number" id="feature_size" step="0.1" value="1.0" min="0.1" max="3.0">
            </div>
            <!-- <div id="prepro_trajectory" class="hidden">
              <span>軌跡あり</span>
              <input type="checkbox" id="trajectory_flg"  value="1"/>
            </div> -->
        
            <div class="prepro_btn">
                <button id="btn_prepro_get_data" type="button">取得・表示</button>
                <button id="btn_prepro_download" type="button" disabled="">結果DL</button>
                <a style="display:none;" id="downloader" href="#"></a>
                <button id="btn_prepro_close" type="button">閉じる</button>
            </div>
        
        </div>

        <script src="dist/itowns-client.js"></script>
    </body>
</html>
